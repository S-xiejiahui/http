<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>app设计</title>
    <link rel="shortcut icon" href="icon/ico/xjh.ico">
    <link rel="stylesheet" type="text/css" href="css/app.css" charset="utf-8" />
    <style>
        .svg {
            width: 20px;
        }
    </style>
</head>

<body>
    <!-- 左边导航栏 -->
    <ul class="menu">
        <li> <a href="#" style="color: green;">USER MENU</a> </li>
        <li><a href="#" id="home"><img src="icon/svg/home.svg" class="svg" alt="">&nbsp; Home</a></li>
        <li><a href="#" id="file"><img src="icon/svg/file.svg" class="svg" alt="">&nbsp; File</a> </li>
        <li><a href="#" id="set"><img src="icon/svg/set.svg" class="svg" alt="">&nbsp; Set</a></li>
        <li><a href="#" id="about"><img src="icon/svg/about.svg" class="svg" alt="">&nbsp; About</a></li>
    </ul>
    <!-- 上方用户信息 -->
    <div class="app">
        <div class="userinfo">
            <p>
                <span><img src="icon/svg/people.svg" class="svg" alt="">&nbsp; username: xjh</span>
                <span style="float: right; margin-right: 20px;"><img src="icon/svg/time.svg" class="svg" alt="">
                    <i id="time"></i></span>
            </p>
            <hr>
        </div>

        <h3 style=" text-align: center;">文件夹</h3>
        <div class="app01">
            <!-- <a href="#" class="mya">
                <img src="img/music.png" alt="" class="myimg">
                <p class="filename">音乐1</p>
            </a> -->
        </div>
        <!-- 下方切换上下页 -->
        <!-- <button class="prev">上一页</button>
        <button class="next">下一页</button> -->
        <button class="btn" id="obj">123</button>
        <button class="btn" id="obj2">456</button>
        <input type="text" id="form" class="002" value="000">
    </div>
        
    <script src="js/jquery.js"></script>
    <script src="js/app.js"></script>
    <script type="text/javascript">
        var obj_allfile = {};
		var obj = document.getElementById("obj");
        //obj元素上绑定click事件
        obj.addEventListener('click', function (event) 
        {
            $.ajax({
                    url: "cgi-xjh/get_detailed_info",
                    dataType: 'json',
                    type: "GET",
                    success: function (data)
                    {
                        console.log(data);
                        obj_allfile = data;
                        // load_all_file(data);
                    },
                    error: function ()
                    {
                        console.log("error");
                    }
                });
            // var str = document.getElementById("form").value;
            // var c = str.indexOf('.');
            // var s = str.substr(c,);
            // console.log(str+":"+s);
        }, false);

        function clean_app_div()
        {
            var app01 = document.querySelector(".app01");// 获取 父标签
            var pObjs = app01.childNodes;// 获取 父标签下的所有子节点
            for (var i = pObjs.length - 1; i >= 0; i--)
            {
                app01.removeChild(pObjs[i]); // 一定要倒序，正序是删不干净的，可自行尝试
            }
        }

        function judge_obj_or_string(variable)
        {
            if(Object.prototype.toString.call(variable) === '[object Array]')
            {
                return 'arr';
            }
            if(Object.prototype.toString.call(variable) === '[object Object]')
            {
                return 'obj';
            }
            if(Object.prototype.toString.call(variable) === '[object String]')
            {
                return 'string'
            }
        }

        function get_obj_of_file(root)
        {
            for (var key in root)
            {
                console.log(key);
                console.log(root[key]);
                for (var data in root[key])
                {
                    if(judge_obj_or_string(data) == "string")
                    {
                        console.log(data + ':  ' + root[key][data]);
                    }
                }
                //break;
            }

            // var file_count = 0;
            // clean_app_div();
            // $.each(root, function (obj_name, obj_key)
            // {
            //     console.log('objname = ' + obj_name +'   '+ 'key = ' + obj_key);

            //     var a = document.createElement("a");
            //     a.href = "#";
            //     a.className = "mya";

            //     var img = document.createElement("img");
            //     img.className = "myimg";

            //     var p = document.createElement("p");
            //     p.className = "filename";
            //     p.innerHTML = obj_name;

            //     img.src = "icon/icon/Makefile.png";

            //     var app01 = document.getElementsByClassName("app01");
            //     app01[0].appendChild(a); //通过类名添加新标签
            //     a.appendChild(img);
            //     a.appendChild(p);

            //     if (++file_count % 5 == 0)
            //     {
            //         // 清除浮动
            //         var div = document.createElement("div");
            //         div.style = "clear: both;";
            //         app01[0].appendChild(div);
            //     }
            // })
        }

        var obj2 = document.getElementById("obj2");
        //obj元素上绑定click事件
        obj2.addEventListener('click', function (event) 
        {
            //console.log(obj_allfile);
            get_obj_of_file(obj_allfile)
        }, false);
	</script>

</body>

</html>